(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[347],{1347:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var o=n(7437),a=n(2265),r=n(759),i=n.n(r);function s(e){let{fields:t,selectedFieldId:n,onFieldSelect:r}=e,s=(0,a.useRef)(null),l=(0,a.useRef)(null),c=(0,a.useRef)([]),d=(0,a.useRef)(!1);return(0,a.useEffect)(()=>{if(!s.current||l.current)return;let e=i().tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"\xa9 Esri, Maxar, Earthstar Geographics",maxZoom:19}),t=i().tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"\xa9 OpenStreetMap",maxZoom:19}),n=i().tileLayer("https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",{attribution:"\xa9 CARTO",subdomains:"abcd",maxZoom:19}),o=i().map(s.current,{center:[35.2,10.4],zoom:8,zoomControl:!1,attributionControl:!1,layers:[e],preferCanvas:!0});i().control.zoom({position:"bottomright"}).addTo(o),i().control.scale({imperial:!1,position:"bottomright"}).addTo(o),i().control.attribution({prefix:!1}).addAttribution('\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>').addAttribution("\xa9 Esri").addTo(o),i().control.layers({"Satellite Imagery":e,"Street Map":t,"Dark Theme":n},void 0,{position:"bottomright"}).addTo(o);let a=new(i()).Control({position:"topleft"});return a.onAdd=function(){let e=i().DomUtil.create("div","leaflet-control");return e.innerHTML="\n                <div style=\"background: rgba(15, 23, 42, 0.8); backdrop-filter: blur(8px); color: #38bdf8; padding: 6px 12px; border-radius: 6px; font-size: 12px; font-family: 'JetBrains Mono', monospace; border: 1px solid rgba(56, 189, 248, 0.3);\">\n                    \uD83D\uDEF0Ô∏è ORBITAL VIEW\n                </div>\n            ",e},a.addTo(o),l.current=o,()=>{o.remove(),l.current=null}},[]),(0,a.useEffect)(()=>{let e=l.current;if(!e)return;c.current.forEach(e=>e.remove()),c.current=[];let o=(e,t)=>{let n=t?24:16,o="healthy"===e?"#22c55e":"warning"===e?"#fbbf24":"#ef4444";return i().divIcon({html:'\n                    <div style="\n                        width: '.concat(n,"px;\n                        height: ").concat(n,"px;\n                        background: ").concat(o,";\n                        border: 2px solid white;\n                        border-radius: 50%;\n                        box-shadow: 0 0 ").concat(t?"20px":"10px"," ").concat(o,";\n                        animation: ").concat(t?"pulse 1.5s infinite":"none",';\n                        position: relative;\n                    ">\n                        ').concat(t?'<div style="position: absolute; inset: -6px; border: 2px solid '.concat(o,'; border-radius: 50%; opacity: 0.5; animation: pulse-ring 1.5s infinite;"></div>'):"","\n                    </div>\n                "),className:"custom-div-icon",iconSize:[n,n],iconAnchor:[n/2,n/2]})};if(t.forEach(t=>{let a=t.id===n,s="healthy"===t.healthStatus?"#22c55e":"warning"===t.healthStatus?"#fbbf24":"#ef4444",l=i().polygon(t.coordinates.map(e=>[e[0],e[1]]),{color:s,weight:a?3:2,opacity:a?1:.7,fillColor:s,fillOpacity:a?.3:.15,dashArray:a?"5, 10":void 0,className:"transition-all duration-300"}),d=i().marker([t.center[0],t.center[1]],{icon:o(t.healthStatus,a),riseOnHover:!0}),p='\n                <div style="font-family: \'JetBrains Mono\', monospace; min-width: 220px; color: white;">\n                    <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 10px;">\n                        <div style="width: 8px; height: 8px; border-radius: 50%; background: '.concat(s,"; box-shadow: 0 0 8px ").concat(s,';"></div>\n                        <div style="font-weight: 700; font-size: 14px; text-transform: uppercase; color: #fff;">\n                            ').concat(t.name,'\n                        </div>\n                    </div>\n                    <div style="font-size: 11px; color: #94a3b8; margin-bottom: 8px;">\n                        REGION: ').concat(t.region,"<br/>\n                        AREA: ").concat(t.areaHectares||"N/A",' HA\n                    </div>\n                    <div style="background: rgba(255,255,255,0.05); padding: 8px; border-radius: 4px; border: 1px solid rgba(255,255,255,0.1);">\n                        <div style="display: flex; justify-content: space-between; align-items: center;">\n                            <span style="font-size: 11px; color: #94a3b8;">STRESS SCORE</span>\n                            <span style="font-size: 14px; font-weight: 700; color: ').concat(s,';">').concat(t.stressScore,'/100</span>\n                        </div>\n                    </div>\n                    <div style="margin-top: 8px; font-size: 10px; color: #64748b; text-align: center;">\n                        CLICK TO VIEW ANALYTICS\n                    </div>\n                </div>\n            ');d.bindPopup(p,{className:"field-popup",closeButton:!1,offset:[0,-10]});let u=i().layerGroup([l,d]).addTo(e);c.current.push(u);let m=()=>{r(t.id)};l.on("click",m),d.on("click",m);let f=()=>{l.setStyle({weight:3,fillOpacity:.4}),a||d.setIcon(o(t.healthStatus,!0))},x=()=>{a||(l.setStyle({weight:2,fillOpacity:.15}),d.setIcon(o(t.healthStatus,!1)))};l.on("mouseover",f),l.on("mouseout",x),d.on("mouseover",f),d.on("mouseout",x),a&&(e.panTo([t.center[0],t.center[1]],{animate:!0,duration:.8}),d.openPopup())}),t.length>0&&!d.current){let n=i().latLngBounds(t.flatMap(e=>e.coordinates.map(e=>[e[0],e[1]])));e.fitBounds(n,{padding:[50,50],maxZoom:12}),d.current=!0}},[t,n,r]),(0,a.useEffect)(()=>{let e=document.createElement("style");return e.textContent="\n            @keyframes pulse {\n                0%, 100% { transform: scale(1); opacity: 1; }\n                50% { transform: scale(1.1); opacity: 0.8; }\n            }\n            @keyframes pulse-ring {\n                0% { transform: scale(1); opacity: 0.8; }\n                100% { transform: scale(2); opacity: 0; }\n            }\n            .field-popup .leaflet-popup-content-wrapper {\n                background: rgba(15, 23, 42, 0.9);\n                backdrop-filter: blur(12px);\n                border: 1px solid rgba(255,255,255,0.1);\n                border-radius: 12px;\n                box-shadow: 0 10px 30px rgba(0,0,0,0.5);\n                padding: 0;\n            }\n            .field-popup .leaflet-popup-tip {\n                background: rgba(15, 23, 42, 0.9);\n            }\n            .field-popup .leaflet-popup-content {\n                margin: 12px;\n            }\n        ",document.head.appendChild(e),()=>{document.head.removeChild(e)}},[]),(0,o.jsxs)("div",{className:"relative rounded-2xl overflow-hidden border border-white/10 group",children:[(0,o.jsx)("div",{ref:s,className:"h-[500px] w-full bg-space-950"}),!l.current&&(0,o.jsx)("div",{className:"absolute inset-0 glass flex items-center justify-center z-[50]",children:(0,o.jsxs)("div",{className:"text-cyber-400 animate-pulse flex items-center gap-3 font-mono",children:[(0,o.jsx)("div",{className:"w-3 h-3 rounded-full bg-cyber-400 animate-ping"}),"INITIALIZING SATELLITE FEED..."]})}),(0,o.jsx)("div",{className:"absolute top-4 right-4 flex flex-col gap-2 z-[400]",children:(0,o.jsxs)("div",{className:"glass p-3 rounded-lg backdrop-blur-md border border-white/5",children:[(0,o.jsx)("div",{className:"text-[10px] font-bold text-gray-400 mb-2 font-mono tracking-wider",children:"FIELD STATUS"}),(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)("div",{className:"w-2 h-2 rounded-full bg-neon-500 shadow-[0_0_8px_rgba(34,197,94,0.6)] animate-pulse"}),(0,o.jsx)("span",{className:"text-[10px] text-gray-300 font-mono",children:"OPTIMAL"})]}),(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)("div",{className:"w-2 h-2 rounded-full bg-harvest-400 shadow-[0_0_8px_rgba(251,191,36,0.6)] animate-pulse"}),(0,o.jsx)("span",{className:"text-[10px] text-gray-300 font-mono",children:"ATTENTION"})]}),(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)("div",{className:"w-2 h-2 rounded-full bg-red-500 shadow-[0_0_8px_rgba(239,68,68,0.6)] animate-pulse"}),(0,o.jsx)("span",{className:"text-[10px] text-gray-300 font-mono",children:"CRITICAL"})]})]})]})})]})}n(5046)},5046:function(){}}]);