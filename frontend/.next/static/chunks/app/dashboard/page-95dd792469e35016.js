(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{339:function(e,s,t){Promise.resolve().then(t.bind(t,7801))},7801:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return j}});var a=t(7437),l=t(2265),n=t(5775),i=t.n(n),r=t(7648);let d=i()(()=>Promise.all([t.e(641),t.e(212),t.e(347)]).then(t.bind(t,1347)),{loadableGenerated:{webpack:()=>[1347]},ssr:!1,loading:()=>(0,a.jsx)("div",{className:"h-[400px] glass rounded-2xl flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-leaf-400 animate-pulse",children:"Loading map..."})})});function c(e){let{status:s}=e;return(0,a.jsx)("span",{className:"px-2 py-0.5 rounded-full text-[10px] font-medium border ".concat({healthy:"bg-leaf-500/20 text-leaf-400 border-leaf-500/30",warning:"bg-harvest-500/20 text-harvest-400 border-harvest-500/30",critical:"bg-red-500/20 text-red-400 border-red-500/30"}[s]),children:{healthy:"● Healthy",warning:"● Warning",critical:"● Critical"}[s]})}function x(e){let{score:s,size:t=70}=e,l=(t-16)/2,n=2*Math.PI*l,i=n-s/100*n,r=e=>e<=30?"#4d7c0f":e<=60?"#daa520":"#dc2626";return(0,a.jsxs)("div",{className:"relative",style:{width:t,height:t},children:[(0,a.jsxs)("svg",{width:t,height:t,className:"transform -rotate-90",children:[(0,a.jsx)("circle",{cx:t/2,cy:t/2,r:l,fill:"none",stroke:"#2d2416",strokeWidth:"6"}),(0,a.jsx)("circle",{cx:t/2,cy:t/2,r:l,fill:"none",stroke:r(s),strokeWidth:"6",strokeLinecap:"round",strokeDasharray:n,strokeDashoffset:i,className:"gauge-fill",style:{filter:"drop-shadow(0 0 4px ".concat(r(s),"40)")}})]}),(0,a.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[(0,a.jsx)("span",{className:"text-lg font-bold text-white",children:s}),(0,a.jsx)("span",{className:"text-[9px] text-gray-400",children:s<=30?"Low":s<=60?"Moderate":"High"})]})]})}function o(e){let{trend:s}=e,{icon:t,color:l,label:n}={stable:{icon:"→",color:"text-gray-400",label:"Stable"},improving:{icon:"↑",color:"text-leaf-400",label:"Improving"},worsening:{icon:"↓",color:"text-red-400",label:"Worsening"}}[s];return(0,a.jsxs)("span",{className:"inline-flex items-center gap-0.5 text-[10px] ".concat(l),children:[(0,a.jsx)("span",{className:"text-xs",children:t}),n]})}function m(e){let{risk:s}=e,{bg:t,text:l,label:n}={low:{bg:"bg-leaf-500/15",text:"text-leaf-400",label:"Low"},medium:{bg:"bg-harvest-500/15",text:"text-harvest-400",label:"Medium"},high:{bg:"bg-red-500/15",text:"text-red-400",label:"High"}}[s];return(0,a.jsxs)("div",{className:"".concat(t," px-2 py-1 rounded-md"),children:[(0,a.jsx)("div",{className:"text-[9px] text-gray-500",children:"Yield"}),(0,a.jsx)("div",{className:"text-[10px] font-semibold ".concat(l),children:n})]})}function h(e){let{field:s,isSelected:t,onSelect:l}=e;return(0,a.jsxs)("div",{className:"glass p-4 card-hover cursor-pointer rounded-xl transition-all ".concat(t?"ring-2 ring-harvest-400 harvest-glow":""),onClick:l,children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-bold text-white text-base mb-0.5 font-serif",children:s.name}),(0,a.jsxs)("p",{className:"text-xs text-gray-400 flex items-center gap-1.5",children:[(0,a.jsx)("span",{className:"text-[10px]",children:"\uD83D\uDCCD"}),(0,a.jsx)("span",{children:s.region}),(0,a.jsx)("span",{children:"•"}),(0,a.jsxs)("span",{children:[s.areaHectares," ha"]})]})]}),(0,a.jsx)(c,{status:s.healthStatus})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,a.jsx)(x,{score:s.stressScore,size:70}),(0,a.jsx)("span",{className:"text-[10px] text-gray-500 mt-1",children:"Water Stress"})]}),(0,a.jsxs)("div",{className:"flex flex-col justify-center space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)("div",{className:"w-6 h-6 rounded-md bg-leaf-500/10 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-[10px]",children:"\uD83D\uDCA7"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-[10px] text-gray-500",children:"Moisture"}),(0,a.jsxs)("div",{className:"text-xs font-semibold text-white",children:[s.moistureLevel,"%"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)("div",{className:"w-6 h-6 rounded-md bg-harvest-500/10 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-[10px]",children:"\uD83C\uDF21️"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-[10px] text-gray-500",children:"Temp"}),(0,a.jsxs)("div",{className:"text-xs font-semibold ".concat(s.temperatureAnomaly>0?"text-harvest-400":"text-leaf-500"),children:[s.temperatureAnomaly>0?"+":"",s.temperatureAnomaly,"\xb0C"]})]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between pt-3 border-t border-white/5",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(o,{trend:s.trend}),(0,a.jsxs)("span",{className:"text-[10px] text-gray-500",children:["\uD83C\uDF33 ",s.treesCount.toLocaleString()]})]}),(0,a.jsx)(m,{risk:s.yieldRisk})]})]})}function u(e){let{insights:s}=e;return(0,a.jsxs)("div",{className:"glass p-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-leaf-500 to-leaf-600 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-xl",children:"\uD83E\uDD16"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-white font-serif",children:"AI Analysis"}),(0,a.jsxs)("p",{className:"text-xs text-gray-400",children:["Confidence: ",s.confidence,"%"]})]})]}),(0,a.jsx)("p",{className:"text-gray-300 mb-4 leading-relaxed text-sm",children:s.summary}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-leaf-400",children:"Recommendations:"}),s.recommendations.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-start gap-2 text-sm text-gray-400",children:[(0,a.jsx)("span",{className:"text-leaf-400 mt-0.5",children:"•"}),(0,a.jsx)("span",{children:e})]},s))]}),(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t border-white/5 text-xs text-gray-500",children:["Analysis: ",s.analysisMethod]})]})}function f(e){let{status:s}=e;return(0,a.jsxs)("div",{className:"glass p-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-olive-500 to-olive-600 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-xl",children:"\uD83D\uDEF0️"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-white font-serif",children:"Satellite Data"}),(0,a.jsx)("p",{className:"text-xs text-gray-400",children:"ESA Copernicus Sentinels"})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"w-2 h-2 rounded-full bg-olive-400"}),(0,a.jsx)("span",{className:"text-sm text-gray-300",children:"Sentinel-1 (Radar)"})]}),(0,a.jsx)("span",{className:"text-sm text-white",children:s.lastSentinel1Pass})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"w-2 h-2 rounded-full bg-leaf-400"}),(0,a.jsx)("span",{className:"text-sm text-gray-300",children:"Sentinel-2 (Optical)"})]}),(0,a.jsx)("span",{className:"text-sm text-white",children:s.lastSentinel2Pass})]})]}),(0,a.jsxs)("div",{className:"mt-4 p-3 rounded-lg bg-olive-500/10 border border-olive-500/20",children:[(0,a.jsx)("div",{className:"text-xs text-gray-400 mb-1",children:"Next Update"}),(0,a.jsx)("div",{className:"text-sm text-olive-400 font-medium",children:new Date(s.nextUpdate).toLocaleString()})]}),(0,a.jsxs)("div",{className:"mt-3 text-xs text-gray-500",children:["Coverage: ",s.coverageArea]})]})}function j(){let[e,s]=(0,l.useState)(null),[t,n]=(0,l.useState)(!0),[i,c]=(0,l.useState)(null),[x,o]=(0,l.useState)(null);(0,l.useEffect)(()=>{let e=async()=>{try{n(!0);let e=await fetch("/api/dashboard");if(!e.ok)throw Error("Failed to fetch");let t=await e.json();s(t),t.fields.length>0&&o(t.fields[0].id)}catch(e){s({fields:[{id:"sfax-north-001",name:"Sfax Northern Grove",region:"Sfax",coordinates:[[34.8234,10.7012],[34.8298,10.7012],[34.8298,10.7156],[34.8234,10.7156],[34.8234,10.7012]],center:[34.8266,10.7084],areaHectares:45.2,treesCount:1800,stressScore:23,moistureLevel:68,temperatureAnomaly:1.2,healthStatus:"healthy",yieldRisk:"low",trend:"stable",lastUpdated:new Date().toISOString(),sentinelData:{ndvi:.72,ndwi:.15,sentinel1Date:"2026-01-28",sentinel2Date:"2026-01-27"}},{id:"sousse-coastal-002",name:"Sousse Coastal Olives",region:"Sousse",coordinates:[[35.8012,10.5934],[35.8089,10.5934],[35.8089,10.6078],[35.8012,10.6078],[35.8012,10.5934]],center:[35.8051,10.6006],areaHectares:32.8,treesCount:1200,stressScore:45,moistureLevel:52,temperatureAnomaly:2.1,healthStatus:"warning",yieldRisk:"medium",trend:"worsening",lastUpdated:new Date().toISOString(),sentinelData:{ndvi:.58,ndwi:.08,sentinel1Date:"2026-01-28",sentinel2Date:"2026-01-27"}},{id:"kairouan-inland-003",name:"Kairouan Heritage Field",region:"Kairouan",coordinates:[[35.6756,10.0912],[35.6834,10.0912],[35.6834,10.1023],[35.6756,10.1023],[35.6756,10.0912]],center:[35.6795,10.0968],areaHectares:28.5,treesCount:950,stressScore:67,moistureLevel:38,temperatureAnomaly:3.2,healthStatus:"critical",yieldRisk:"high",trend:"worsening",lastUpdated:new Date().toISOString(),sentinelData:{ndvi:.42,ndwi:-.05,sentinel1Date:"2026-01-28",sentinel2Date:"2026-01-27"}}],aiInsights:{summary:"⚠️ Attention needed: 1 field showing high water stress. Average stress level: 45/100.",recommendations:["\uD83D\uDEA8 Kairouan Heritage Field: Consider immediate irrigation - stress level is critical (67/100)","⚡ Sousse Coastal Olives: Monitor closely and plan irrigation within 3-5 days","\uD83C\uDF3F Sfax Northern Grove looks healthy - continue current irrigation schedule"],confidence:87,analysisMethod:"Sentinel-1 SAR + Sentinel-2 Multispectral fusion",lastAnalysis:new Date().toISOString()},satelliteStatus:{lastSentinel1Pass:"2026-01-28",lastSentinel2Pass:"2026-01-27",nextUpdate:new Date(Date.now()+216e5).toISOString(),coverageArea:"Northern Tunisia (Sfax, Sousse, Kairouan regions)"},generatedAt:new Date().toISOString()}),o("sfax-north-001")}finally{n(!1)}};e();let t=setInterval(e,3e4);return()=>clearInterval(t)},[]);let m=null==e?void 0:e.fields.find(e=>e.id===x);return t?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 rounded-full border-4 border-leaf-500 border-t-transparent animate-spin mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-leaf-400",children:"Loading satellite data..."})]})}):e?(0,a.jsxs)("div",{className:"min-h-screen",children:[(0,a.jsx)("header",{className:"glass border-b border-earth-700/30 sticky top-0 z-50",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-3 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)(r.default,{href:"/",className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-xl",children:"\uD83E\uDED2"}),(0,a.jsx)("span",{className:"text-base font-bold bg-gradient-to-r from-leaf-400 to-harvest-300 bg-clip-text text-transparent italic tracking-wide",children:"ZAYTUNA.AI"})]}),(0,a.jsx)("span",{className:"text-gray-500 text-sm",children:"|"}),(0,a.jsx)("span",{className:"text-gray-300 text-sm",children:"Dashboard"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1.5 text-xs text-gray-400",children:[(0,a.jsx)("span",{className:"w-1.5 h-1.5 rounded-full bg-leaf-400 animate-pulse"}),"Live"]}),(0,a.jsx)("button",{className:"glass px-3 py-1.5 rounded-lg text-xs text-gray-300 hover:text-white transition-colors",children:"Settings"})]})]})}),(0,a.jsxs)("main",{className:"max-w-7xl mx-auto px-4 py-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-6",children:[(0,a.jsxs)("div",{className:"glass p-3 text-center rounded-xl",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-white mb-0.5",children:e.fields.length}),(0,a.jsx)("div",{className:"text-[10px] text-gray-400",children:"Fields Monitored"})]}),(0,a.jsxs)("div",{className:"glass p-3 text-center rounded-xl",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-leaf-400 mb-0.5",children:e.fields.filter(e=>"healthy"===e.healthStatus).length}),(0,a.jsx)("div",{className:"text-[10px] text-gray-400",children:"Healthy"})]}),(0,a.jsxs)("div",{className:"glass p-3 text-center rounded-xl",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-harvest-400 mb-0.5",children:e.fields.filter(e=>"warning"===e.healthStatus).length}),(0,a.jsx)("div",{className:"text-[10px] text-gray-400",children:"Need Attention"})]}),(0,a.jsxs)("div",{className:"glass p-3 text-center rounded-xl",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-red-400 mb-0.5",children:e.fields.filter(e=>"critical"===e.healthStatus).length}),(0,a.jsx)("div",{className:"text-[10px] text-gray-400",children:"Critical"})]})]}),(0,a.jsxs)("div",{className:"grid lg:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-white font-serif",children:"Your Olive Fields"}),(0,a.jsx)("div",{className:"grid md:grid-cols-2 gap-4",children:e.fields.map(e=>(0,a.jsx)(h,{field:e,isSelected:e.id===x,onSelect:()=>o(e.id)},e.id))}),(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-white mb-4 font-serif",children:"Field Map"}),(0,a.jsx)(d,{fields:e.fields,selectedFieldId:x,onFieldSelect:o})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(u,{insights:e.aiInsights}),(0,a.jsx)(f,{status:e.satelliteStatus}),m&&(0,a.jsxs)("div",{className:"glass p-6",children:[(0,a.jsxs)("h3",{className:"font-semibold text-white mb-4 font-serif",children:["\uD83D\uDCCD ",m.name," Details"]}),(0,a.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Region"}),(0,a.jsx)("span",{className:"text-white",children:m.region})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Area"}),(0,a.jsxs)("span",{className:"text-white",children:[m.areaHectares," hectares"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Trees"}),(0,a.jsx)("span",{className:"text-white",children:m.treesCount.toLocaleString()})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Stress Score"}),(0,a.jsxs)("span",{className:"font-medium ".concat(m.stressScore<=30?"text-leaf-400":m.stressScore<=60?"text-harvest-400":"text-red-400"),children:[m.stressScore,"/100"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Vegetation Index"}),(0,a.jsx)("span",{className:"text-white",children:m.sentinelData.ndvi.toFixed(2)})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Water Index"}),(0,a.jsx)("span",{className:"text-white",children:m.sentinelData.ndwi.toFixed(2)})]})]})]})]})]})]}),(0,a.jsx)("footer",{className:"border-t border-earth-700/30 py-6 px-6 mt-12",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto flex items-center justify-between text-sm text-gray-500",children:[(0,a.jsx)("span",{children:"ZAYTUNA.AI • ActInSpace 2026"}),(0,a.jsx)("span",{children:"Data: ESA Copernicus Sentinel-1 & Sentinel-2"})]})})]}):(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-red-400 mb-4",children:"Failed to load dashboard data"}),(0,a.jsx)("button",{onClick:()=>window.location.reload(),className:"btn-primary",children:"Retry"})]})})}},5775:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});let a=t(5583),l=t(1780);Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"default",{enumerable:!0,get:function(){return r}});let n=t(7043);t(7437),t(2265);let i=n._(t(5602));function r(e,s){var t;let n={loading:e=>{let{error:s,isLoading:t,pastDelay:a}=e;return null}};"function"==typeof e&&(n.loader=e);let r=a._({},n,s);return(0,i.default)(l._(a._({},r),{modules:null==(t=r.loadableGenerated)?void 0:t.modules}))}("function"==typeof s.default||"object"==typeof s.default&&null!==s.default)&&void 0===s.default.__esModule&&(Object.defineProperty(s.default,"__esModule",{value:!0}),Object.assign(s.default,s),e.exports=s.default)},1523:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"BailoutToCSR",{enumerable:!0,get:function(){return l}});let a=t(8993);function l(e){let{reason:s,children:t}=e;if("undefined"==typeof window)throw new a.BailoutToCSRError(s);return t}},5602:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});let a=t(5583);Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"default",{enumerable:!0,get:function(){return x}});let l=t(7437),n=t(2265),i=t(1523),r=t(49);function d(e){return{default:e&&"default"in e?e.default:e}}let c={loader:()=>Promise.resolve(d(()=>null)),loading:null,ssr:!0},x=function(e){let s=a._({},c,e),t=(0,n.lazy)(()=>s.loader().then(d)),x=s.loading;function o(e){let d=x?(0,l.jsx)(x,{isLoading:!0,pastDelay:!0,error:null}):null,c=s.ssr?(0,l.jsxs)(l.Fragment,{children:["undefined"==typeof window?(0,l.jsx)(r.PreloadCss,{moduleIds:s.modules}):null,(0,l.jsx)(t,a._({},e))]}):(0,l.jsx)(i.BailoutToCSR,{reason:"next/dynamic",children:(0,l.jsx)(t,a._({},e))});return(0,l.jsx)(n.Suspense,{fallback:d,children:c})}return o.displayName="LoadableComponent",o}},49:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"PreloadCss",{enumerable:!0,get:function(){return n}});let a=t(7437),l=t(544);function n(e){let{moduleIds:s}=e;if("undefined"!=typeof window)return null;let t=(0,l.getExpectedRequestStore)("next/dynamic css"),n=[];if(t.reactLoadableManifest&&s){let e=t.reactLoadableManifest;for(let t of s){if(!e[t])continue;let s=e[t].files.filter(e=>e.endsWith(".css"));n.push(...s)}}return 0===n.length?null:(0,a.jsx)(a.Fragment,{children:n.map(e=>(0,a.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:t.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}}},function(e){e.O(0,[648,971,117,744],function(){return e(e.s=339)}),_N_E=e.O()}]);